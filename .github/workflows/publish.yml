name: publish
on: workflow_dispatch
jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: ruby/setup-ruby@v1
      with:
        ruby-version: '3.2'
    - name: Publish page
      env:
        GITHUB_AUTH_TOKEN: ${{secrets.GITHUB}}
        RUBYGEMS: picandocodigo
        WORDPRESS: fernandobt
      run: bundle install &&
             bundle exec middleman build --verbose &&
             git checkout -b gh-pages &&
             cp build/* . &&
             git add . &&
             git push
